<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Vue 实例</title>
    <script src="https://cdn.staticfile.org/vue/2.4.2/vue.min.js"></script>
    <script src="https://cdn.staticfile.org/vue-router/2.7.0/vue-router.min.js"></script>
    <script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"> </script>
    <link rel="stylesheet" type="text/css"
        href="https://cdn.staticfile.org/twitter-bootstrap/4.1.0/css/bootstrap.min.css">
</head>

<body>

    <div id="app">
        <!-- 路由匹配到的组件将渲染在这里 -->
        <router-view></router-view>
    </div>

    <!--引入组建-->
    <script src="components/menu.js"></script>
    <script src="components/home.js"></script>
    <script src="components/mycart.js"></script>
    <script src="components/detail.js"></script>
    <script src="components/login.js"></script>
    <script src="components/register.js"></script>

    <!--引入store共享状态-->
    <script src="store/store.js"></script>
    <!--引入路由-->
    <script src="router/router.js"></script>
    <!--最后，引入主程序-->
    <script src="main/main.js"></script>
    
    <script>
        //允许携带cookie 跨域访问关键
        axios.defaults.withCredentials = true

        // http response 响应拦截器
        axios.interceptors.response.use(response => {
            // 在接收响应做些什么，例如跳转到登录页
            if (response.data.status == "logout") {
                router.push({
                    path: 'login'
                })
            }
            return response;
        }, error => {
            // 对响应错误做点什么
            return Promise.reject(error)
        });        
    </script>

</body>

</html>